# 要求事項ドキュメント

## 概要

歯科ワークフローシステムにおいて、ユーザーが編集セッション中に行った変更や設定を、正式なワークフローテンプレートとして保存し、後で再利用できる機能を実装する。これにより、ユーザーは試行錯誤の過程で作成した有効な設定を失うことなく、効率的にワークフローを管理できるようになる。

## 要求事項

### 要求事項 1

**ユーザーストーリー:** 歯科医師として、編集セッション中に作成した治療ワークフローの設定を、正式なワークフローテンプレートとして保存したい。そうすることで、同様の治療に対して再利用できるようになる。

#### 受け入れ基準

1. WHEN ユーザーが編集セッション画面で「ワークフローとして保存」ボタンをクリック THEN システムは現在の編集セッションの全設定を保存ダイアログに表示する
2. WHEN ユーザーがワークフロー名とカテゴリを入力して保存を実行 THEN システムは編集セッションの内容を新しいワークフローテンプレートとして保存する
3. WHEN 保存が完了 THEN システムは保存成功メッセージを表示し、ワークフロー一覧に新しいテンプレートが追加される

### 要求事項 2

**ユーザーストーリー:** 歯科医師として、保存された編集セッションベースのワークフローを、通常のワークフローと同様に表示・選択したい。そうすることで、過去の編集セッションから作成したワークフローを簡単に見つけて使用できる。

#### 受け入れ基準

1. WHEN ユーザーがワークフロー選択画面を開く THEN システムは編集セッションから保存されたワークフローも含めて全てのワークフローを表示する
2. WHEN 編集セッションから保存されたワークフローが表示される THEN システムはそれが編集セッション由来であることを示すアイコンまたはラベルを表示する
3. WHEN ユーザーが編集セッション由来のワークフローを選択 THEN システムは通常のワークフローと同様に患者に適用できる

### 要求事項 3

**ユーザーストーリー:** 歯科医師として、編集セッションから保存したワークフローを編集・更新したい。そうすることで、使用経験に基づいてワークフローを改善できる。

#### 受け入れ基準

1. WHEN ユーザーが編集セッション由来のワークフローを右クリック THEN システムは「編集」「削除」「複製」のオプションを表示する
2. WHEN ユーザーが「編集」を選択 THEN システムは該当ワークフローを編集モードで開く
3. WHEN ユーザーがワークフローを編集して保存 THEN システムは変更を既存のワークフローに反映する

### 要求事項 4

**ユーザーストーリー:** 歯科医師として、編集セッション中に一時的な変更を加えながら、元のワークフローを保持したい。そうすることで、実験的な変更を安全に試すことができる。

#### 受け入れ基準

1. WHEN ユーザーが既存ワークフローを編集セッションで開く THEN システムは元のワークフローを変更せずに編集セッション用のコピーを作成する
2. WHEN ユーザーが編集セッションで変更を加える THEN システムは変更を一時的なセッションデータとして保存し、元のワークフローには影響しない
3. WHEN ユーザーがセッションを終了する際に保存を選択しない THEN システムは一時的な変更を破棄し、元のワークフローは変更されない

### 要求事項 5

**ユーザーストーリー:** システム管理者として、編集セッションから保存されたワークフローのメタデータを管理したい。そうすることで、ワークフローの由来や作成日時を追跡できる。

#### 受け入れ基準

1. WHEN 編集セッションからワークフローが保存される THEN システムは作成日時、作成者、元セッション情報をメタデータとして記録する
2. WHEN ユーザーがワークフローの詳細を表示 THEN システムは編集セッション由来の場合、その情報を含むメタデータを表示する
3. WHEN システム管理者がワークフロー管理画面を開く THEN システムは編集セッション由来のワークフローを識別できるフィルター機能を提供する